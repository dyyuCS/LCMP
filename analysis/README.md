# Analysis Folder

This folder contains scripts and output files for network simulation result analysis, mainly focusing on flow completion time (FCT) and link utilization.

## Main Contents

- **FCT Analysis Scripts**: Multiple Python scripts (e.g., `fct_analysis_py3_batch.py`) for analyzing FCT logs produced by simulations. Batch versions help to process multiple datasets in an automated way.
- **Result Aggregation**: Scripts like `merge_fct_results.py` combine results from different runs for further statistical processing.
- **Link Utilization Visualization**: Scripts such as `plot_link_utilization.py` help produce figures and plots (e.g., PNG images) to visualize link utilization over time, for comparing different algorithms or configurations.
- **Output Data**: The `server-output/` directory (and similarly named folders) store CSV analysis results and figures automatically generated by the analysis scripts. Subfolders are typically organized by experiment name and traffic/utilization level.

## How to Use

1. **Run FCT or Utilization Analysis**  
   Use the relevant Python scripts to process raw simulation outputs. Most scripts accept standard command-line arguments; use `python <script_name>.py -h` to view usage instructions for each script.
2. **Batch Processing**  
   Batch scripts can process multiple datasets or experiment conditions automatically for large-scale analysis.
3. **Visualize Results**  
   Plotting scripts generate PNG or CSV outputs for further visualization or publication.

## Reproducing Paper Experiments

Below are example command sequences for post-processing each paper experiment, directly matching the categories in the simulation/README.md. For each, first run `fct_analysis_py3_batch.py` to process the FCT outputs, then aggregate with `merge_fct_results.py`. For the Motivation experiment, also use `plot_link_utilization.py` to analyze link utilization.

### Small-Scale (8 datacenters) Tests

- **Motivation Experiment**
    ```bash
    python3 fct_analysis_py3_batch.py 
    -i "../simulation/mix/config/8DC-hetero/server-output/Figure1-posCor_8DC_original_flow_linkUtil" 
    -o "server-output/Figure1-8DC_linkUtil"
    python3 plot_link_utilization.py 
    --base_dir '../simulation/mix/config/8DC-hetero/server-output/Figure1-posCor_8DC_original_flow_linkUtil/link-util/0.3util' 
    --topology '../simulation/mix/config/8DC-hetero/topology_LeafSpine_MultiDC8.txt' --output_dir 'server-output/Figure1-8DC_linkUtil'
    ```
- **Routing and Traffic Load Comparison**
    ```bash
    python3 fct_analysis_py3_batch.py 
    -i "../simulation/mix/config/8DC-hetero/server-output/Figure5-8DC_3routing_3traffic" 
    -o "server-output/Figure5-8DC_3routing_3traffic"
    python3 merge_fct_results.py
    -i "server-output/Figure5-8DC_3routing_3traffic" 
    -o "server-output/Figure5-8DC_3routing_3traffic" 
    ```
- **Different Traffic Datasets Comparison (Robustness)**
    ```bash
    python3 fct_analysis_py3_batch.py 
    -i "../simulation/mix/config/8DC-hetero/server-output/Figure9-8DC_differDataset" 
    -o "server-output/Figure9-8DC_differDataset"
    python3 merge_fct_results.py
    -i "server-output/Figure9-8DC_differDataset" 
    -o "server-output/Figure9-8DC_differDataset" 
    ```
- **Different Congestion Control Comparison (Robustness)**
    ```bash
    python3 fct_analysis_py3_batch.py 
    -i "../simulation/mix/config/8DC-hetero/server-output/Figure10-8DC-differCC" 
    -o "server-output/Figure10-8DC-differCC"
    python3 merge_fct_results.py
    -i "server-output/Figure10-8DC-differCC" 
    -o "server-output/Figure10-8DC-differCC" 
    ```
- **Ablation Study**
    ```bash
    python3 fct_analysis_py3_batch.py 
    -i "../simulation/mix/config/8DC-hetero/server-output/Figure11/ablation-study" 
    -o "server-output/Figure11/ablation-study"
    python3 merge_fct_results.py
    -i "server-output/Figure11/ablation-study" 
    -o "server-output/Figure11/ablation-study" 
    ```
- **Path Cost Component Tests**
    ```bash
    python3 fct_analysis_py3_batch.py 
    -i "../simulation/mix/config/8DC-hetero/server-output/Figure11/path-cost" 
    -o "server-output/Figure11/path-cost"
    python3 merge_fct_results.py
    -i "server-output/Figure11/path-cost" 
    -o "server-output/Figure11/path-cost" 
    ```

- **Congestion Cost Component Tests**
    ```bash
    python3 fct_analysis_py3_batch.py 
    -i "../simulation/mix/config/8DC-hetero/server-output/Figure11/congestion-cost" 
    -o "server-output/Figure11/congestion-cost"
    python3 merge_fct_results.py
    -i "server-output/Figure11/congestion-cost" 
    -o "server-output/Figure11/congestion-cost" 
    ```

- **Global Weight Component Tests**
    ```bash
    python3 fct_analysis_py3_batch.py 
    -i "../simulation/mix/config/8DC-hetero/server-output/Figure11/global-weight" 
    -o "server-output/Figure11/global-weight"
    python3 merge_fct_results.py
    -i "server-output/Figure11/global-weight" 
    -o "server-output/Figure11/global-weight" 
    ```
### Large-Scale (13 datacenters) Experiments

- **Routing and Traffic Load Comparison**
    ```bash
    python3 fct_analysis_py3_batch.py 
    -i "../simulation/mix/config/13DC-hetero/server-output/Figure-7&8-13DC_3routing_3traffic" 
    -o "server-output/Figure-7&8-13DC_3routing_3traffic"
    python3 merge_fct_results.py
    -i "server-output/Figure-7&8-13DC_3routing_3traffic" 
    -o "server-output/Figure-7&8-13DC_3routing_3traffic" 
    ```

Refer to each script's `-h` option for detailed usage and options for batch processing.

## Note
- For details on specific scripts or file formats, read the script headers or check the inline help (`-h` flag).
- Output directories may contain large numbers of files; use filtering tools or scripts to organize or summarize results.
- This folder is under active development; structure and file organization may evolve.
